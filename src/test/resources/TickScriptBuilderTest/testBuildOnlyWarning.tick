stream
  |from()
    .measurement('measurement')
    .groupBy('resourceId')
  |where(lambda:
    if(isPresent("resource_metadata_os"), "resource_metadata_os" == 'linux', FALSE)
      )
  |stateDuration(lambda: "field" >= 33)
      .unit(1m)
      .as('warn_count')
  |alert()
    .stateChangesOnly()
    .id('tenant:{{index .Tags "system_resourceId"}}:measurement:field')
    .details('task={{.TaskName}}')
    .crit(lambda: 'warn_count' > 5)
    .topic('events')