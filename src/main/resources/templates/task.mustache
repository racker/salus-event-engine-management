stream
  |from()
    .measurement('{{measurement}}')
    .groupBy('{{groupBy}}')
{{#entrySet}}
  |where(lambda: if(isPresent("{{labelNamespace}}.{{key}}"), "{{labelNamespace}}.{{key}}" == '{{value}}', FALSE))
{{/entrySet}}
  |alert()
    .stateChangesOnly()
    .id('{{alertId}}')
    .details('{{details}}')
    .crit(lambda: {{critExpression}})
    .topic('events')